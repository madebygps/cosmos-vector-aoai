# cosmos-vector-aoai
A vector store and search implementation with Cosmos DB NoSQL, Python, Cognitive Search, and Azure OpenAI.

## Note

The completions from AOAI are grounded by a vector search and index loaded with manually prepared data.

## Azure Cognitive Search Vector Search Notes
- Vector search is a method of information retrieval where documents and queries are represented as vectors instead of plain text. 
- Vectors are generated by ML models, like the embeddings model available in Azure OpenAI,
- Vector search is used to find similar items based on their embeddings.
- Cognitive Search uses HNSW to perform vector search.

## HNSW Notes

- HNSW stands for Hierarchical Navigable Small World.
- ANN approximate nearest neighbor search is a class of algorithms designed for finding matches in a vector space.
- Hierarchical Navigable Small Worlds HSWN is one of the best performing algorithms for ANN search
- https://learn.microsoft.com/azure/search/vector-search-overview#approximate-nearest-neighbors


Cosine similarity is a measure of the angle between two vectors in a multidimensional space 1.
It does not depend on the distance or magnitude of the vectors, only on their direction. Therefore, if two vectors are near each other, it does not necessarily mean they are more similar than vectors that are further apart. What matters is how aligned they are. For example, two vectors that are orthogonal (at 90 degrees) have zero cosine similarity, regardless of how close or far they are. On the other hand, two vectors that are parallel (at 0 or 180 degrees) have maximum or minimum cosine similarity, respectively, regardless of how close or far they

### HNSW Parameters
- m: The number of bi-directional links created for each node during construction. This is the maximum number of connections that can be traversed during a search.
- efConstruction: The size of the dynamic list of nodes that are considered during construction. This is the maximum number of nodes that can be visited during construction.
- efSearch: The size of the dynamic list of nodes that are considered during a search. This is the maximum number of nodes that can be visited during a search.
- metric: The distance metric used to calculate the distance between two vectors. The default is L2, which is the Euclidean distance. Other options are IP, which is the inner product, and COSINE, which is the cosine similarity.


## Azure Cognitive Search Notes
- A search index is like a database of searchable content.
- https://azuresdkdocs.blob.core.windows.net/$web/python/azure-search-documents/latest/index.html#creating-an-index
- https://github.com/Azure/azure-sdk-for-python/tree/main/sdk/search/azure-search-documents/samples

### Semantic Search notes

- Semantic search will allow us to conduct semantic or hybrid search (with vector search.
- A semantic configuration defines the fields that will be used for semantic search.

### Indexer and datasource notes

- A datasource is where the search index can get its data from.
- An indexer will take the data from the datasource and put it into the search index.

## Semantic kernel reading

- https://devblogs.microsoft.com/semantic-kernel/announcing-semantic-kernel-integration-with-azure-cognitive-search/
- https://github.com/dluc/Azure-Cognitive-Search-20230720